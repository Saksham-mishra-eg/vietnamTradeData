"use strict";(()=>{var e={};e.id=345,e.ids=[345],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:e=>{e.exports=require("assert")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},80665:e=>{e.exports=require("dns")},17702:e=>{e.exports=require("events")},92048:e=>{e.exports=require("fs")},98216:e=>{e.exports=require("net")},19801:e=>{e.exports=require("os")},55315:e=>{e.exports=require("path")},76162:e=>{e.exports=require("stream")},74026:e=>{e.exports=require("string_decoder")},82452:e=>{e.exports=require("tls")},74175:e=>{e.exports=require("tty")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},22051:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>g,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>f,staticGenerationAsyncStorage:()=>x});var s={};r.r(s),r.d(s,{POST:()=>l});var a=r(49303),n=r(88716),i=r(60670),u=r(87070),o=r(66677),p=r(79458);async function l(e){try{let t=await e.json().catch(()=>({})),r=(0,o.Z)(t.email||t.userEmail||"");if(!r)return u.NextResponse.json({message:"Email is required"},{status:400});let s=(e.headers.get("x-forwarded-for")||e.headers.get("x-real-ip")||r).toString();if(!await (0,p.Dn)(`delete-data:${s}`,3,36e5))return u.NextResponse.json({message:"Rate limit exceeded"},{status:429});return u.NextResponse.json({ok:!0,message:"Deletion request received. We will verify and proceed."},{status:202})}catch(e){return u.NextResponse.json({message:e instanceof Error?e.message:"Server error"},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/user/delete-data/route",pathname:"/api/user/delete-data",filename:"route",bundlePath:"app/api/user/delete-data/route"},resolvedPagePath:"F:\\Local Disk F\\EGTestVietnam\\vietnam-trade-data\\app\\api\\user\\delete-data\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:x,serverHooks:f}=d,m="/api/user/delete-data/route";function g(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:x})}},79458:(e,t,r)=>{r.d(t,{Dn:()=>u});let s=null,a=!1;async function n(){if(!a){a=!0;try{let e=await r.e(197).then(r.t.bind(r,62197,23)).catch(()=>null);if(!e){s=null;return}let t=e.default??e,a=process.env.REDIS_URL;a&&(s=new t(a))}catch(e){s=null}}}let i=new Map;async function u(e,t=5,r=6e4){if(await n(),s){let a=`rl:${e}`;try{let e=await s.incr(a);return 1===e&&await s.expire(a,Math.ceil(r/1e3)),e<=t}catch(e){}}let a=Date.now(),u=(i.get(e)||[]).filter(e=>a-e<r);return!(u.length>=t)&&(u.push(a),i.set(e,u),!0)}},66677:(e,t,r)=>{r.d(t,{Z:()=>s});function s(e){return null==e?"":("string"==typeof e?e:String(e)).replace(/[&<>"'`]/g,e=>{switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&#39;";case"`":return"&#96;";default:return e}})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,972],()=>r(22051));module.exports=s})();